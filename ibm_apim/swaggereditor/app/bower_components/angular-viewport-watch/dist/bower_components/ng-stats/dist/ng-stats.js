/*! ng-stats 28-11-2014 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&module.exports?module.exports=b:a.showAngularStats=b()}(window,function(){"use strict";function a(){if(!z){z=!0;var a=d(),b=Object.getPrototypeOf(a),c=b.$digest;b.$digest=function(){var a=u();c.apply(this,arguments);var b=u()-a;i(e(),b)}}}function b(a){window.angular&&d()?c(a):window.setTimeout(function(){b(a)},200)}function c(b){function c(a,c){var d=c||y,e=d>b.digestTimeThreshold?"red":"green";if(x=j(a)?x:a,y=j(c)?y:c,h.text(x+" | "+y.toFixed(2)).css({color:e}),c){var f=k.getContext("2d");g>0&&(g=0,f.fillStyle="#333",f.fillRect(i.width-1,0,1,i.height)),f.fillStyle=e,f.fillRect(i.width-1,Math.max(0,i.height-d),2,2)}}function d(){if(e.active){window.setTimeout(d,250);var a=k.getContext("2d"),b=a.getImageData(1,0,i.width-1,i.height);a.putImageData(b,0,0),a.fillStyle=g++>2?"black":"#333",a.fillRect(i.width-1,0,1,i.height)}}if(t&&(t.$el&&t.$el.remove(),t.active=!1,t=null),b===!1)return void sessionStorage.removeItem(s);b=angular.extend({position:"top-left",digestTimeThreshold:16,autoload:!1},b||{}),a();var e=t={active:!0};b.autoload?sessionStorage.setItem(s,JSON.stringify(b)):sessionStorage.removeItem(s);var f=angular.element(document.body),g=0;e.$el=angular.element("<div><canvas></canvas><div></div></div>").css({position:"fixed",background:"black",borderBottom:"1px solid #666",borderRight:"1px solid #666",color:"red",fontFamily:"Courier",width:130,zIndex:9999,top:-1==b.position.indexOf("top")?null:0,bottom:-1==b.position.indexOf("bottom")?null:0,right:-1==b.position.indexOf("right")?null:0,left:-1==b.position.indexOf("left")?null:0,textAlign:"right"}),f.append(e.$el);var h=e.$el.find("div"),i={width:130,height:40},k=e.$el.find("canvas").attr(i)[0];A.digestLength.push(function(a){c(null,a)}),A.watchCount.push(function(a){c(a)}),d(),r.$$phase||r.$digest()}function d(){if(r)return r;var a=document.querySelector(".ng-scope");return a?r=angular.element(a).scope().$root:null}function e(){window.clearTimeout(w);var a=u();return a-v>300?(v=a,x=k()):w=window.setTimeout(function(){i(e())},350),x}function f(a){var b=g(a);return k(b)}function g(a){a=angular.element(a);var b=a.scope();return b||(a=angular.element(a.querySelector(".ng-scope")),b=a.scope()),b}function h(a){return a&&a.$$watchers?a.$$watchers:[]}function i(a,b){j(a)||angular.forEach(A.watchCount,function(b){b(a)}),j(b)||angular.forEach(A.digestLength,function(a){a(b)})}function j(a){return null===a||void 0===a}function k(a){var b=0;return l(a,function(a){b+=h(a).length}),b}function l(a,b){if("function"==typeof a&&(b=a,a=null),a=a||d(),a=p(a)){var c=b(a);return c===!1?c:n(a,b)}}function m(a,b){for(var c;(a=a.$$nextSibling)&&(c=b(a),c!==!1)&&(c=n(a,b),c!==!1););return c}function n(a,b){for(var c;(a=a.$$childHead)&&(c=b(a),c!==!1)&&(c=m(a,b),c!==!1););return c}function o(a){var b=null;return l(function(c){return c.$id===a?(b=c,!1):void 0}),b}function p(a){return q(a)&&(a=o(a)),a}function q(a){return"string"==typeof a||"number"==typeof a}var r,s="showAngularStats_autoload",t=null,u=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},v=u(),w=null,x=e()||0,y=0,z=!1,A={digest:[],watchCount:[],digestLength:[]},B=sessionStorage[s];return B&&b(JSON.parse(B)),angular.module("angularStats",[]).directive("angularStats",function(){function b(a){for(var b=a[0];b.parentElement;)b=b.parentElement;return b}return{scope:{digestLength:"@",watchCount:"@",watchCountRoot:"@",onDigestLengthUpdate:"&?",onWatchCountUpdate:"&?"},link:function(c,d,e){if(a(),e.hasOwnProperty("digestLength")){var g=d;e.digestLength&&(g=angular.element(d[0].querySelector(e.digestLength))),A.digestLength.push(function(a){g.text((a||0).toFixed(2))})}if(e.hasOwnProperty("watchCount")){var h,i=d;if(c.watchCount&&(i=angular.element(d[0].querySelector(e.watchCount))),c.watchCountRoot)if("this"===c.watchCountRoot)h=d;else{var j;if(j=e.hasOwnProperty("watchCountOfChild")?d[0]:b(d),h=angular.element(j.querySelector(c.watchCountRoot)),!h.length)throw new Error("no element at selector: "+c.watchCountRoot)}A.watchCount.push(function(a){var b=a;h&&(b=f(h)),i.text(b)})}c.onWatchCountUpdate&&A.watchCount.push(function(a){c.onWatchCountUpdate({watchCount:a})}),c.onDigestLengthUpdate&&A.digestLength.push(function(a){c.onDigestLengthUpdate({digestLength:a})})}}}),c});